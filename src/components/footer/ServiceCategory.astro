---
// Service Category Component - Reusable service category with services list
interface Service {
  href: string;
  label: string;
}

interface Props {
  title: string;
  icon: string;
  iconGradient: string;
  textColor: string;
  hoverShadow: string;
  borderColor: string;
  services: Service[];
  backgroundGradient: string;
  hasSecondarySection?: boolean;
  secondaryTitle?: string;
  secondaryIcon?: string;
  secondaryIconGradient?: string;
  secondaryTextColor?: string;
  secondaryServices?: Service[];
  hasThirdSection?: boolean;
  thirdTitle?: string;
  thirdIcon?: string;
  thirdIconGradient?: string;
  thirdTextColor?: string;
  thirdServices?: Service[];
  roundedClass?: string;
  borderClasses?: string;
}

const { 
  title,
  icon,
  iconGradient,
  textColor,
  hoverShadow,
  borderColor,
  services,
  backgroundGradient,
  hasSecondarySection = false,
  secondaryTitle,
  secondaryIcon,
  secondaryIconGradient,
  secondaryTextColor,
  secondaryServices = [],
  hasThirdSection = false,
  thirdTitle,
  thirdIcon,
  thirdIconGradient,
  thirdTextColor,
  thirdServices = [],
  roundedClass = "",
  borderClasses = "border-t border-l border-r"
} = Astro.props;

// Extract the base color from textColor for dynamic hover effects
const getHoverColor = (textColor: string) => {
  if (textColor.includes('indigo')) return '99, 102, 241';
  if (textColor.includes('green')) return '34, 197, 94';
  if (textColor.includes('rose')) return '244, 63, 94';
  if (textColor.includes('blue')) return '59, 130, 246';
  if (textColor.includes('teal')) return '20, 184, 166';
  return '99, 102, 241'; // default fallback
};

const hoverColorRGB = getHoverColor(textColor);
---

<div class={`service-box-padding bg-gradient-to-br ${backgroundGradient} backdrop-blur-sm ${roundedClass} ${borderClasses} ${borderColor} transition-all duration-300 group`}
     style={`--hover-color: ${hoverColorRGB};`}
     onmouseenter={`this.style.boxShadow = '0 8px 32px rgba(${hoverColorRGB}, 0.15), 0 4px 20px rgba(${hoverColorRGB}, 0.1), 0 2px 8px rgba(0, 0, 0, 0.1)'; this.style.transform = 'translateY(-4px) scale(1.02)';`}
     onmouseleave={`this.style.boxShadow = ''; this.style.transform = '';`}>
  <!-- Primary Section -->
  <div class="flex items-center gap-3 mb-3">
    <div class={`w-8 h-8 bg-gradient-to-r ${iconGradient} rounded-lg flex items-center justify-center`}>
      <Fragment set:html={icon} />
    </div>
    <h4 class={`text-lg font-semibold ${textColor}`}>{title}</h4>
  </div>
  <ul class={`space-y-2 ${hasSecondarySection ? 'mb-6' : ''}`}>
    {services.map((service) => (
      <li>
        <a href={service.href} class={`${textColor} hover:text-white transition-colors duration-300 text-sm flex items-center gap-2`}>
          <span class={`w-1.5 h-1.5 ${textColor.replace('text-', 'bg-')}/60 rounded-full`}></span>
          {service.label}
        </a>
      </li>
    ))}
  </ul>

  {hasSecondarySection && (
    <>
      <!-- Divider -->
      <div class="h-px bg-white/10 mb-4"></div>
      
      <!-- Secondary Section -->
      <div class="flex items-center gap-3 mb-3">
        <div class={`w-8 h-8 bg-gradient-to-r ${secondaryIconGradient} rounded-lg flex items-center justify-center`}>
          <Fragment set:html={secondaryIcon} />
        </div>
        <h4 class={`text-lg font-semibold ${secondaryTextColor}`}>{secondaryTitle}</h4>
      </div>
      <ul class={`space-y-2 ${hasThirdSection ? 'mb-6' : ''}`}>
        {secondaryServices.map((service) => (
          <li>
            <a href={service.href} class={`${secondaryTextColor || textColor} hover:text-white transition-colors duration-300 text-sm flex items-center gap-2`}>
              <span class={`w-1.5 h-1.5 ${(secondaryTextColor || textColor).replace('text-', 'bg-')}/60 rounded-full`}></span>
              {service.label}
            </a>
          </li>
        ))}
      </ul>
    </>
  )}

  {hasThirdSection && (
    <>
      <!-- Divider -->
      <div class="h-px bg-white/10 mb-4"></div>
      
      <!-- Third Section -->
      <div class="flex items-center gap-3 mb-3">
        <div class={`w-8 h-8 bg-gradient-to-r ${thirdIconGradient} rounded-lg flex items-center justify-center`}>
          <Fragment set:html={thirdIcon} />
        </div>
        <h4 class={`text-lg font-semibold ${thirdTextColor}`}>{thirdTitle}</h4>
      </div>
      <ul class="space-y-2">
        {thirdServices.map((service) => (
          <li>
            <a href={service.href} class={`${thirdTextColor || textColor} hover:text-white transition-colors duration-300 text-sm flex items-center gap-2`}>
              <span class={`w-1.5 h-1.5 ${(thirdTextColor || textColor).replace('text-', 'bg-')}/60 rounded-full`}></span>
              {service.label}
            </a>
          </li>
        ))}
      </ul>
    </>
  )}
</div>

<style>
  /* Enhanced glow effect on hover - handled by inline styles for theme-aware colors */
  .group {
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }
</style>
