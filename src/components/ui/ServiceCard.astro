---
export interface Props {
  title: string;
  description: string;
  icon: string;
  tags: string;
  variant: 'indigo' | 'green' | 'blue' | 'orange' | 'purple' | 'teal' | 'rose';
  pixelColors: string;
  className?: string;
}

const {
  title,
  description,
  icon,
  tags,
  variant,
  pixelColors,
  className = ''
} = Astro.props;

// Define variant styles to match your original exactly
const variantStyles = {
  indigo: {
    container: "group bg-gradient-to-br from-indigo-500/10 via-blue-500/5 to-indigo-600/10 backdrop-blur-lg border border-indigo-400/20 rounded-xl p-8 text-center transition-all duration-300 hover:-translate-y-3 hover:scale-105 hover:bg-gradient-to-br hover:from-indigo-500/15 hover:via-blue-500/10 hover:to-indigo-600/15 hover:border-indigo-400/30 hover:shadow-[0_20px_50px_rgba(99,102,241,0.3)] relative overflow-hidden",
    icon: "w-16 h-16 bg-gradient-to-r from-indigo-500 to-blue-500 rounded-2xl flex items-center justify-center transform group-hover:rotate-3 transition-transform duration-300",
    text: "text-indigo-400"
  },
  green: {
    container: "group bg-gradient-to-br from-green-500/10 via-emerald-500/5 to-green-600/10 backdrop-blur-lg border border-green-400/20 rounded-xl p-8 text-center transition-all duration-300 hover:-translate-y-3 hover:scale-105 hover:bg-gradient-to-br hover:from-green-500/15 hover:via-emerald-500/10 hover:to-green-600/15 hover:border-green-400/30 hover:shadow-[0_20px_50px_rgba(34,197,94,0.3)] relative overflow-hidden",
    icon: "w-16 h-16 bg-gradient-to-r from-green-500 to-emerald-500 rounded-2xl flex items-center justify-center transform group-hover:rotate-3 transition-transform duration-300",
    text: "text-green-400"
  },
  blue: {
    container: "group bg-gradient-to-br from-blue-100/70 via-cyan-100/40 to-blue-200/60 dark:from-blue-500/10 dark:via-cyan-500/5 dark:to-blue-600/10 backdrop-blur-lg border border-blue-300/40 dark:border-blue-400/20 rounded-xl p-8 text-center transition-all duration-300 hover:-translate-y-3 hover:scale-105 hover:bg-gradient-to-br hover:from-blue-200/80 hover:via-cyan-200/50 hover:to-blue-300/70 dark:hover:from-blue-500/15 dark:hover:via-cyan-500/10 dark:hover:to-blue-600/15 hover:border-blue-400/50 dark:hover:border-blue-400/30 hover:shadow-[0_20px_50px_rgba(59,130,246,0.3)] relative overflow-hidden",
    icon: "w-16 h-16 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-2xl flex items-center justify-center transform group-hover:rotate-3 transition-transform duration-300",
    text: "text-blue-400"
  },
  orange: {
    container: "group bg-gradient-to-br from-orange-100/70 via-yellow-100/40 to-orange-200/60 dark:from-orange-500/10 dark:via-yellow-500/5 dark:to-orange-600/10 backdrop-blur-lg border border-orange-300/40 dark:border-orange-400/20 rounded-xl p-8 text-center transition-all duration-300 hover:-translate-y-3 hover:scale-105 hover:bg-gradient-to-br hover:from-orange-200/80 hover:via-yellow-200/50 hover:to-orange-300/70 dark:hover:from-orange-500/15 dark:hover:via-yellow-500/10 dark:hover:to-orange-600/15 hover:border-orange-400/50 dark:hover:border-orange-400/30 hover:shadow-[0_20px_50px_rgba(249,115,22,0.3)] relative overflow-hidden",
    icon: "w-16 h-16 bg-gradient-to-r from-orange-500 to-yellow-500 rounded-2xl flex items-center justify-center transform group-hover:rotate-3 transition-transform duration-300",
    text: "text-orange-400"
  },
  purple: {
    container: "group bg-gradient-to-br from-purple-100/70 via-pink-100/40 to-purple-200/60 dark:from-purple-500/10 dark:via-pink-500/5 dark:to-purple-600/10 backdrop-blur-lg border border-purple-300/40 dark:border-purple-400/20 rounded-xl p-8 text-center transition-all duration-300 hover:-translate-y-3 hover:scale-105 hover:bg-gradient-to-br hover:from-purple-200/80 hover:via-pink-200/50 hover:to-purple-300/70 dark:hover:from-purple-500/15 dark:hover:via-pink-500/10 dark:hover:to-purple-600/15 hover:border-purple-400/50 dark:hover:border-purple-400/30 hover:shadow-[0_20px_50px_rgba(168,85,247,0.3)] relative overflow-hidden",
    icon: "w-16 h-16 bg-gradient-to-r from-purple-500 to-pink-500 rounded-2xl flex items-center justify-center transform group-hover:rotate-3 transition-transform duration-300",
    text: "text-purple-400"
  },
  teal: {
    container: "group bg-gradient-to-br from-teal-500/10 via-cyan-500/5 to-teal-600/10 backdrop-blur-lg border border-teal-400/20 rounded-xl p-8 text-center transition-all duration-300 hover:-translate-y-3 hover:scale-105 hover:bg-gradient-to-br hover:from-teal-500/15 hover:via-cyan-500/10 hover:to-teal-600/15 hover:border-teal-400/30 hover:shadow-[0_20px_50px_rgba(20,184,166,0.3)] relative overflow-hidden",
    icon: "w-16 h-16 bg-gradient-to-r from-teal-500 to-cyan-500 rounded-2xl flex items-center justify-center transform group-hover:rotate-3 transition-transform duration-300",
    text: "text-teal-400"
  },
  rose: {
    container: "group bg-gradient-to-br from-rose-500/10 via-pink-500/5 to-rose-600/10 backdrop-blur-lg border border-rose-400/20 rounded-xl p-8 text-center transition-all duration-300 hover:-translate-y-3 hover:scale-105 hover:bg-gradient-to-br hover:from-rose-500/15 hover:via-pink-500/10 hover:to-rose-600/15 hover:border-rose-400/30 hover:shadow-[0_20px_50px_rgba(244,63,94,0.3)] relative overflow-hidden",
    icon: "w-16 h-16 bg-gradient-to-r from-rose-500 to-pink-500 rounded-2xl flex items-center justify-center transform group-hover:rotate-3 transition-transform duration-300",
    text: "text-rose-400"
  }
};

const styles = variantStyles[variant];
---

<div class={`${styles.container} ${className}`}>
  <pixel-canvas
    data-colors={pixelColors}
    data-gap="7.5"
    data-speed="75"
    data-no-focus
    style="position: absolute; inset: 0; z-index: 1; pointer-events: none;"
  ></pixel-canvas>

  <!-- Circular mask overlay to reduce center intensity -->
  <!-- Light Mode Mask (darker overlay for light backgrounds) -->
  <div class="pixel-mask-overlay light-mode-only"></div>

  <!-- Dark Mode Mask (lighter overlay for dark backgrounds) -->
  <div class="pixel-mask-overlay dark-mode-only"></div>

  <div class="relative z-10">
    <div class="h-16 mb-6 flex items-center justify-center">
      <div class={styles.icon}>
        <Fragment set:html={icon} />
      </div>
    </div>

    <h3 class={`text-xl mb-4 ${styles.text} font-semibold`}>{title}</h3>

    <p class="text-text-light-secondary dark:text-text-dark-secondary leading-relaxed mb-4">
      {description}
    </p>

    <div class={`${styles.text} text-sm font-medium`}>
      {tags}
    </div>
  </div>
</div>

<style>
  /* Base mask styles */
  .pixel-mask-overlay {
    position: absolute;
    inset: 0;
    z-index: 2;
    pointer-events: none;
    opacity: 0;
    transition: opacity 0.3s ease;
  }

  /* Light Mode Mask - darker overlay for light backgrounds */
  .light-mode-only {
    display: block;
    background: radial-gradient(circle at center,
      rgba(255, 255, 255, 0.15) 0%,
      rgba(255, 255, 255, 0) 85%
    );
  }

  /* Dark Mode Mask - lighter overlay for dark backgrounds */
  .dark-mode-only {
    display: none;
    background: radial-gradient(circle at center,
      rgba(0, 0, 0, 0.15) 0%,
      rgba(0, 0, 0, 0) 45%
    );
  }

  /* Theme switching - same pattern as ThemeAwareButton */
  :root.dark .light-mode-only {
    display: none;
  }
  :root.dark .dark-mode-only {
    display: block;
  }

  .group:hover .pixel-mask-overlay {
    opacity: 1;
  }
</style>