---
export interface Props {
  tooltip: string;
  icon: string;
  onClick?: string;
  variant?: 'default' | 'brand' | 'chat' | 'settings';
  id?: string;
  className?: string;
}

const { 
  tooltip, 
  icon, 
  onClick, 
  variant = 'default', 
  id,
  className = "" 
} = Astro.props;

const variantClasses = {
  default: 'backdrop-blur-lg border rounded-lg transition-all duration-300 hover:scale-110 hover:-translate-y-1',
  brand: 'animate-button-gradient text-white backdrop-blur-lg border rounded-lg transition-all duration-300 hover:scale-110 hover:-translate-y-1',
  chat: 'backdrop-blur-lg border rounded-lg transition-all duration-300 hover:scale-110 hover:-translate-y-1',
  settings: 'backdrop-blur-lg border rounded-lg transition-all duration-300 hover:scale-110 hover:-translate-y-1'
};

const variantStyles = {
  default: "background: linear-gradient(135deg, rgba(16, 209, 255, 0.15), rgba(16, 209, 255, 0.08)); border-color: rgba(16, 209, 255, 0.4); box-shadow: 0 4px 20px rgba(16, 209, 255, 0.2), 0 1px 3px rgba(16, 209, 255, 0.1);",
  brand: "background: linear-gradient(-45deg, #3b82f6, #8b5cf6, #ec4899, #10d1ff); background-size: 400% 400%;",
  chat: "background: linear-gradient(135deg, rgba(34, 197, 94, 0.15), rgba(34, 197, 94, 0.08)); border-color: rgba(34, 197, 94, 0.4); box-shadow: 0 4px 20px rgba(34, 197, 94, 0.2), 0 1px 3px rgba(34, 197, 94, 0.1);",
  settings: "background: linear-gradient(135deg, rgba(168, 85, 247, 0.15), rgba(168, 85, 247, 0.08)); border-color: rgba(168, 85, 247, 0.4); box-shadow: 0 4px 20px rgba(168, 85, 247, 0.2), 0 1px 3px rgba(168, 85, 247, 0.1);"
};

const iconClasses = {
  settings: 'transition-all duration-300 group-hover:rotate-90'
};
---

<button 
  type="button" 
  class={`dock-item group relative flex-1 sm:flex-none ${className}`} 
  data-tooltip={tooltip}
  onclick={onClick}
  id={id}
>
  <div class={`w-full h-full aspect-square sm:w-12 sm:h-12 ${variantClasses[variant]} flex items-center justify-center text-text-light-primary dark:text-text-dark-primary relative overflow-hidden`} style={variantStyles[variant]}>
    
    {variant === 'brand' ? (
      <span class="text-white font-black text-sm sm:text-lg relative z-10">MK</span>
    ) : variant === 'chat' ? (
      <div class="scale-75 sm:scale-100 text-green-400">
        <Fragment set:html={icon} />
      </div>
    ) : variant === 'settings' ? (
      <div class="scale-75 sm:scale-100 text-purple-400 transition-all duration-300 group-hover:rotate-90">
        <Fragment set:html={icon} />
      </div>
    ) : (
      <div class="scale-75 sm:scale-100 text-blue-400">
        <Fragment set:html={icon} />
      </div>
    )}
  </div>
  
  <!-- Tooltip -->
  <div class="absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 sm:px-3 sm:py-2 bg-black dark:bg-white text-white dark:text-black text-xs sm:text-sm whitespace-nowrap rounded opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50 shadow-lg pointer-events-none" role="tooltip">
    {tooltip}
  </div>
</button>

<style>
  /* Animated gradient for brand variant */
  .animate-button-gradient {
    animation: button-gradient 3s ease-in-out infinite;
  }

  @keyframes button-gradient {
    0% {
      background-position: 0% 50%;
    }
    50% {
      background-position: 100% 50%;
    }
    100% {
      background-position: 0% 50%;
    }
  }
</style>
